name: Auto-build HTML files

on:
  push:
    branches:
      - master
  schedule:
    - cron: '0 8 * * *'  # Runs at 8:00 AM UTC every day

# Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages
permissions:
  contents: read
  pages: write
  id-token: write

jobs:
  call-build-site:
    uses: comic-git/comic_git_engine/.github/workflows/build_site.yaml@v1
    secrets: inherit            # allow referencing any repo/env secrets below
    with:
      env: |                   # <-- matches your build_site.yaml input name
        SITE_ENV=production
        ENGINE_VERSION=v1
        GH_TOKEN=${{ secrets.GITHUB_TOKEN }}
        API_TOKEN=${{ secrets.MY_API_TOKEN }}
        EXTRA_FLAGS=--delete-scheduled-posts --verbose
